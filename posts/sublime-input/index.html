<!doctype html><html data-color-scheme=auto><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>STDIN inputs via Sublime Text (sort of) · Sid Verma</title><link rel=stylesheet href=/css/rocinante.min.css><link rel=stylesheet type=text/css href=https://sidverma.io/css/style.43d9f1db361927f335592361b86ccbd6cfa942114cc7afe99c1a78eb7a648cb0.css><link rel="shortcut icon" href=/icons/favicon.ico><body><header><h2><a class=site-title href=https://sidverma.io/>‹ Sid Verma</a></h2></header><main><div class=post><div class=title-group><div class=title><h1>STDIN inputs via Sublime Text (sort of)</h1></div><div class=date><h5>Jan 03, 2015</h5></div></div><article class=content><p>I love Sublime Text. I really do. I can put a ring on it if it had any corporeal form. I&rsquo;ve been using it so much, that trying to work on anything else is kind of a pain. And yet, when dealing with STDIN inputs, the magic falters. This method describes a workaround to give inputs without a prompt.</p><p>Recently, I tried my hand on Competitive Programming, and though I didn&rsquo;t get really good at it, I did encounter a frustation. Entering the same input again and again after every change I make to the code. I wanted a simpler method.</p><p>Here&rsquo;s what a friend of mine came up with: Enter the input in comments.</p><div class=highlight><pre class=chroma><code class=language-cpp data-lang=cpp><span class=cm>/*input
</span><span class=cm>2
</span><span class=cm>foo
</span><span class=cm>bar
</span><span class=cm>*/</span>

<span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span><span class=cp></span><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
  <span class=kt>int</span> <span class=n>n</span><span class=p>,</span><span class=n>i</span><span class=p>;</span>
  <span class=kt>char</span> <span class=n>s</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span>
  <span class=n>scanf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span><span class=o>&amp;</span><span class=n>n</span><span class=p>);</span>
  <span class=k>for</span><span class=p>(</span><span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
    <span class=n>scanf</span><span class=p>(</span><span class=s>&#34;%s&#34;</span><span class=p>,</span><span class=n>s</span><span class=p>);</span>
    <span class=n>printf</span><span class=p>(</span><span class=s>&#34;%s</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span><span class=n>s</span><span class=p>);</span>
<span class=p>}</span> <span class=p>}</span>
</code></pre></div><p>gives the output:</p><pre><code>foo
bar
</code></pre><p>I wrote up a <a href=http://gist.github.com/mavidser/83d50803622ae70895ce target=_blank>quick and really dirty plugin to do it</a> for Python, and though it was rather clunky, I had a rough idea of what I wanted, and how to do it. Pipes! Good ol&rsquo; pipes!</p><p>Now, what I had was a clunky implementation which just executes the following command:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>echo</span> <span class=s2>&#34;input&#34;</span> <span class=p>|</span> python program.py</code></pre></div><p>I started jotting down a list of things I needed to add to the plugin. The first thing was to make the execution asynchronous. I couldn&rsquo;t let the whole editor hang when a program&rsquo;s under execution. Also, to be able to kill programs. And proper error reporting, platform independency, etc.</p><p>It turns out all these things were already implemented, in the default build system of Sublime Text itself. I decided to merge my plugin it.</p><p>Apart from things like input extraction, handling filenames, the behavious of things in Windows, etc, the main trick was changing</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=bp>self</span><span class=o>.</span><span class=n>proc</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>Popen</span><span class=p>([</span><span class=s2>&#34;/bin/bash&#34;</span><span class=p>,</span> <span class=s2>&#34;-c&#34;</span><span class=p>,</span> <span class=n>shell_cmd</span><span class=p>],</span>
                             <span class=n>stdout</span><span class=o>=</span><span class=n>subprocess</span><span class=o>.</span><span class=n>PIPE</span><span class=p>,</span>
                             <span class=n>stderr</span><span class=o>=</span><span class=n>subprocess</span><span class=o>.</span><span class=n>PIPE</span><span class=p>,</span>
                             <span class=n>startupinfo</span><span class=o>=</span><span class=n>startupinfo</span><span class=p>,</span>
                             <span class=n>env</span><span class=o>=</span><span class=n>proc_env</span><span class=p>,</span>
                             <span class=n>shell</span><span class=o>=</span><span class=bp>False</span><span class=p>)</span></code></pre></div><p>to</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>echo_input</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>Popen</span><span class=p>(</span><span class=s1>&#39;echo &#34;&#39;</span> <span class=o>+</span> <span class=n>user_input</span> <span class=o>+</span> <span class=s1>&#39;&#34;&#39;</span><span class=p>,</span>
                              <span class=n>stderr</span><span class=o>=</span><span class=n>subprocess</span><span class=o>.</span><span class=n>STDOUT</span><span class=p>,</span>
                              <span class=n>stdout</span><span class=o>=</span><span class=n>subprocess</span><span class=o>.</span><span class=n>PIPE</span><span class=p>,</span>
                              <span class=n>shell</span><span class=o>=</span><span class=bp>True</span><span class=p>)</span>

<span class=bp>self</span><span class=o>.</span><span class=n>proc</span>  <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>Popen</span><span class=p>([</span><span class=s2>&#34;/bin/bash&#34;</span><span class=p>,</span> <span class=s2>&#34;-c&#34;</span><span class=p>,</span> <span class=n>shell_cmd</span><span class=p>],</span>
                              <span class=n>stdin</span><span class=o>=</span><span class=n>echo_input</span><span class=o>.</span><span class=n>stdout</span><span class=p>,</span> <span class=c1>#Input</span>
                              <span class=n>stdout</span><span class=o>=</span><span class=n>subprocess</span><span class=o>.</span><span class=n>PIPE</span><span class=p>,</span>
                              <span class=n>stderr</span><span class=o>=</span><span class=n>subprocess</span><span class=o>.</span><span class=n>PIPE</span><span class=p>,</span>
                              <span class=n>startupinfo</span><span class=o>=</span><span class=n>startupinfo</span><span class=p>,</span>
                              <span class=n>env</span><span class=o>=</span><span class=n>proc_env</span><span class=p>,</span>
                              <span class=n>shell</span><span class=o>=</span><span class=bp>False</span><span class=p>)</span></code></pre></div><p>A few other fixes, and the whole thing was running smooth as butter. No more rapid switching between the Console and Sublime Text to execute a program.</p><hr><p>The plugin has now been nicely packaged and uploaded. It can easily be installed via <a href=http://packagecontrol.io/packages/Sublime%20Input target=_blank>Package Control</a>, and the source is available on <a href=http://github.com/mavidser/SublimeInput target=_blank>Github</a>.</p></article><br><div class=tags><div class="horizontal-links links"><a href=/tags/tech/>#tech</a></div></div></article></main><footer><div class=content-container><div class=content><p>Hey friend. I&rsquo;m <b class=sway>Sid</b>.</p><p>This is my home on the internet. Come, have a tour. Please leave your shoes at the door.</p><p>I work with technology for a living - mostly as a software engineer. Some details are available in the resume below. In addition, I&rsquo;m interested in filmmaking, tinkering with electronics, and building a decentralized internet.</p><p>I also like trees.</p><p>Email me if you&rsquo;d like to work together. <em>Or if you just wanna chat.</em><br></p><p class=horizontal-links><a href=/resume target=_blank>Resume</a><a href=/contact class=email-hook id=about-email title="Click to show email">Email</a><a href=https://github.com/mavidser target=_blank>Github</a><a href=https://instagram.com/mavidser target=_blank>Instagram</a></p><p class=horizontal-links><a href=/posts>All Posts</a><a href=/photos>Photo albums</a><a href=/tags>List of tags</a></p></div><div class=footer-text><span class=footer-emoji>✌️</span></div></div></footer><script>const emailId=atob("bWVAc2lkdmVybWEuaW8=");</script><script src=/js/rocinante.min.js></script></body></html>